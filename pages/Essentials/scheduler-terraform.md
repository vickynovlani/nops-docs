---
title: nOps Scheduler with Terraform
keywords: savings, recommendations, scheduler, essentials, terraform
tags: [essentials, scheduler]
sidebar: mydoc_sidebar
permalink: scheduler-terraform.html
folder: Essentials
series: [Essentials, Scheduler]
weight: 3.0
---
# nOps Scheduler with Terraform Guide #

## What is nOps Scheduler? ##

**nOps Scheduler** automatically pauses unused cloud resources, such as EC2 instances, EC2 Autoscaling groups, EKS node groups, RDS instances, and RDS Clusters. nOps Scheduler integrates with Terraform to create, manage, and monitor schedules and resources.


## Why use nOps Scheduler? ##

- **Cost optimization.** Scheduling can save organizations a significant amount of money on Dev and QA costs, especially during off-peak hours.
- **Time savings.** Lack of time and resources is a key blocker preventing engineers from reducing cloud spend — nOps Scheduler makes identifying and scheduling underutilized resources simpler and faster.
- **Automation**. Our AI is constantly learning your usage patterns for greater savings.


## Summary of Steps ##

In order to schedule an instance: 

1. Identify AWS idle resources using nOps.
2. Create a new nSwitch on the nOps Dashboard.
3. Add tags to your Terraform code.


### Identify resources for scheduling ###

To identify resources for scheduling on/off cycles using nOps

1. Log in to the **nOps Dashboard** > click on **Essentials** > **nOps Scheduler**.

![](https://lh7-us.googleusercontent.com/u-yhQAVGqCDB2N5hu759SYADU16O58tIdijHfvZiuQmEEZXH0QGIm2ocKwNlYh36P4FtBV6kB5t_hB5_ecZcIpPXwqVnxg0xrvKXGKgAt0m07fxg7IilOpDYdkWrI0of9VtHJPBT7P8I3Ha_JwHRv0M)

2. Click on **Utilization-Based Recommendation** or **Workload-Based Recommendation.**

![](https://lh7-us.googleusercontent.com/9VHiFuXxTmPibzJLtfzNI4fc1Y25iOLOAMeMcUI2W5wZ0jS9eXpuNZhczxxZr5uDGu5GUjLh6tiVkXn0DDBZxCCZ9eZcZkH6nUGNjoNnCixHomatLUVrfQZa3Va9LBZawJxUF11KyLD8utTqGkUT8MU)

This page contains your Scheduler Optimization recommendations. The **Utilization-Based** recommendations are generated by analyzing your AWS Cloudwatch and other important logs for information such as CPU, Memory, Disk Read/Write OPS, and network transfer bits.  Resources listed here have a 95%+ confidence rating of being idle, and eligible candidates to be scheduled off/on in accordance with the proposed schedule.

The **Workload-Based Recommendations** are workloads in non-production environments which nOps has determined through the account they live in, tag, or resource name.

This page also provides other information such as logs, historical cost data, etc.

### Create an nSwitch ###

Follow the steps to create your schedule (for our example, an RDP server).

1. Log in to your nOps account > **Essentials > nOps Scheduler > Create New nSwitch.**

    ![](https://lh7-us.googleusercontent.com/9VHiFuXxTmPibzJLtfzNI4fc1Y25iOLOAMeMcUI2W5wZ0jS9eXpuNZhczxxZr5uDGu5GUjLh6tiVkXn0DDBZxCCZ9eZcZkH6nUGNjoNnCixHomatLUVrfQZa3Va9LBZawJxUF11KyLD8utTqGkUT8MU)

2. Type your nSwitch Name and select your **EventBridge**.
    ![](https://lh7-us.googleusercontent.com/BD5BC0NRRCskZx527V2pVCcy6j5XY5CQDIG75twNDHrZbfPZwCvoYNtDvX301fu8K_w3tSqoTUJ4LZRFSKxJvAmP2Vn4q7sFEalbVvBU24cO5hQh60RQ671KVdFQfzSkk9j_U9yE8MkNtShv40oVwQU)

    {%include note.html content="If you don’t have EventBridge, read [this article](/essentials-eventbridge-setup.html) first." %}

3. Scroll down and select the time zone and time to schedule the resource(s). In this example, the RDP server will be scheduled to run from 9 a.m. to 6 p.m. on weekdays. 

    ![](https://lh7-us.googleusercontent.com/hfCQpj6np5C8Zj1zi8niXCDu-l64OnpgTnHt7eIhNeftBGy4HXYyzEwqFO__zfztfMN_xMFYqCAlxErPdkUGFN3ZBmipTJfJEd3GzMFu9fukLP4Nnrh18IIuFDov8PO4dhKqWL0SCWurbqBCiNNVZlA)

4. Select **Create**.


### Schedule a resource using Terraform ### 

Open your nSwitch and copy the **Key** and **Value** for Terraform.

![](https://lh7-us.googleusercontent.com/Lw_XrQZ1Bd19IgoCN-G1Qn4lXXZh8AfUhtL7oMsD_oYjVLgThKFPePXVhGb_rUk0fiD46KhbDVE5rGRBvEF9iZvdowzZq_3eDyakvqY8FcfZ99phIaGWpgtZ_sBgLnK0hRMbqIuqMEGf3Nv_M3zHNOA)

**Add the nSwitch Tag to the Terraform code.** After copying the **Key** and **Value** from nSwitch,  open your Terraform code and paste it under the tags section, following the instructions provided in this image. Then, **apply** the Terraform code to implement the changes.

![](https://lh7-us.googleusercontent.com/1qB2Qrpexs6Exx_Ai2VJXGpTDiPOpSyG043Q3kBM4_L8ru6K_t7nh9syluwy_M6mJWrhtz2p153cm1oQigeRU-o1IU0DHW4EoZW4brGF3n3Da2d4k5AAH3U6lUmU8QMKRO4vk6VKkMOQ_Cj5z6Zr84c)

Once you apply the code, you will see a new tag attached to the resource.

![](https://lh7-us.googleusercontent.com/98tsdYS4ViyHmYzxf56I7ETyjp8DX7tgzzxc75Smsc0UIaDonnBMpx0q1CqGvAURhjav1fQMox0E4agvvJxOSPpX6Bbzoi2b-k8CZBonhV00yZKspU-d7jFC7Ps6IGKhtofDWIwjM1ahEkX9lTs6AZk)

After successfully adding tags to AWS, it takes nOps approximately 24 hours to display the resources under nSwitch. 

![](https://lh7-us.googleusercontent.com/MA7GgD33-YGQGrO1T8CN00iquNhdctPqwD-SrCc1ZyQGxewviExBc4AbZT-szwip30MeGqxhuYLV4Xa77MozRCWXg-5EI7xVougXYczK81R79QTuY7MhBCDqK8hTVdcW1oDcz4C_MZOtAhUxkKxxvac)

nOps makes it easy to identify idle resources and schedule them via Terraform. If you don’t have a nOps account, [get started](https://www.nops.io/get-started/) today.


<br/><br/>

{% include custom/series_related.html %}